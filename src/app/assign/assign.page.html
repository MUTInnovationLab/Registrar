<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title class="header-title">ASSIGN USER</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="background">

  <ion-grid>
    <ion-row>
      <ion-col size="3">
        <ion-item>
          <ion-select [(ngModel)]="selectedFaculty" (ionChange)="onFacultyChange()" placeholder="Select Faculty">
            <ion-select-option *ngFor="let faculty of faculties" [value]="faculty.id">{{ faculty.facultyName }}</ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>

      <ion-col size="3">
        <ion-item>
          <ion-select [(ngModel)]="selectedDepartment" (ionChange)="onDepartmentChange()" placeholder="Select Department" [disabled]="!selectedFaculty">
            <ion-select-option *ngFor="let department of departments" [value]="department.departmentName">{{ department.departmentName }}</ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>

      <ion-col size="3">
        <ion-item>
          <ion-select [(ngModel)]="selectedCourse" (ionChange)="onCourseChange()" placeholder="Select Course" [disabled]="!selectedDepartment">
            <ion-select-option *ngFor="let course of courses" [value]="course.courseName">{{ course.courseName }}</ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>

      <ion-col size="3">
        <ion-item>
          <ion-select [(ngModel)]="selectedModules" placeholder="Select Module" [disabled]="!selectedCourse" multiple="true">
            <ion-select-option *ngFor="let module of modules" [value]="module.moduleName">{{ module.moduleName }}</ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>
    </ion-row>
  </ion-grid>
  
  <ion-grid class="grid-container">
    <ion-row>
      <ion-col size="12" class="info"></ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="6" class="card-column">
        <ion-card class="cardcenter card-column">
          <ion-card-header>
            <ion-card-title>Add User Info</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ion-item>
              <ion-label position="floating">Name</ion-label>
              <ion-icon name="person" slot="start"></ion-icon>
              <ion-input type="text" name="name" [(ngModel)]="name" (input)="nameError=null;"></ion-input>
              <div class="error-message" *ngIf="nameError">{{ nameError }}</div>
            </ion-item>

            <ion-item>
              <ion-label position="floating">Email</ion-label>
              <ion-icon name="mail" slot="start"></ion-icon>
              <ion-input type="email" [(ngModel)]="email" name="email" (input)="emailError = null;"></ion-input>
              <div class="error-message" *ngIf="emailError">{{ emailError }}</div>
            </ion-item>

            <ion-item>
              <ion-label position="floating">Position</ion-label>
              <ion-select [(ngModel)]="position" name="position" (ionChange)="onPositionChange()" (ionChange)="positionError = null">
                <ion-select-option value="External Moderator">External Moderator</ion-select-option>
                <ion-select-option value="Finance">Finance</ion-select-option>
                <ion-select-option value="Examination Officer">Examination Officer</ion-select-option>
                <ion-select-option value="Human Resource">Human Resource</ion-select-option>
                <ion-select-option value="Deputy Registrar">Deputy Registrar</ion-select-option>
                <ion-select-option value="HOD">HOD</ion-select-option>
                <ion-select-option value="Lecturer">Lecturer</ion-select-option>
                <ion-select-option value="Admin">Admin</ion-select-option>
              </ion-select>
              <ion-icon name="briefcase" slot="start"></ion-icon>
              <div class="error-message" *ngIf="positionError">{{ positionError }}</div>
            </ion-item>
            
            <ion-item>
              <ion-select [(ngModel)]="selectedModules" placeholder="Select Module" [disabled]="position === 'Admin'" multiple="true">
                <ion-select-option *ngFor="let module of modules" [value]="module.moduleName">{{ module.moduleName }}</ion-select-option>
              </ion-select>
            </ion-item>

            <ion-item>
              <ion-label position="floating">Staff Number</ion-label>
              <ion-icon name="people" slot="start"></ion-icon>
              <ion-input type="text" name="staffNumber" [(ngModel)]="staffNumber" (input)="staffError = null;"></ion-input>
              <div class="error-message" *ngIf="staffError">{{ staffError }}</div>
            </ion-item>
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size="6" class="card-column1">
        <ion-card class="cardcenter card-column1">
          <ion-card-header>
            <ion-card-title>Assign Admin</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <!-- Card content -->
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>

  <div class="button-container">
    <button class="butSubmit" expand="block" (click)="Validation()">
      <ion-icon name="add-outline"></ion-icon>
      Assign
    </button>
    <button class="btnHover2" expand="block" (click)="Validation()" (click)="updateUser()">
      <ion-icon name="pencil-outline"></ion-icon>
      Update
    </button>
    <button class="btnHover1" expand="block" (click)="Validation()" (click)="deleteUser()">
      <ion-icon name="trash-outline"></ion-icon>
      Remove
    </button>
  </div>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <div class="footer-text">
      Designed with <ion-icon name="heart"></ion-icon> by MUT INNOVATION LAB
    </div>
  </ion-toolbar>
</ion-footer>
